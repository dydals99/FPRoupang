<?xml version="1.0" encoding="UTF-8"?>

<!-- Mapper파일을 구상하기 위한 Doctype 설정 -->
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="com.edu.springboot.jdbc.ISupportsService">
 
	<select id="getTotalCountSearch" resultType="int">
		SELECT COUNT(*) from couboard where contact=#{param1}
		<if test="!param2.equals('ALL')">
			and categoryCode=#{param2}
		</if>
		
	</select>

	<select id="listPageSearch" resultType="com.edu.springboot.jdbc.SupportsDTO">
		SELECT * FROM couboard where contact=#{param1}
		<if test="!param2.equals('ALL')">
			and categoryCode=#{param2}
		</if>
	</select>
	
	<insert id="write">
		INSERT INTO inquiry (idx, title, email, contents, regidate, name, product)
		VALUES
		(inquiry_seq.nextval, #{_title},#{_email}, #{_contents}, sysdate, '주문내역')
	</insert>

	<select id="view" resultType="com.edu.springboot.jdbc.SupportsDTO"
		parameterType="com.edu.springboot.jdbc.SupportsDTO">
		SELECT * FROM couboard WHERE idx=#{idx}
		AND email=#{email}
	</select>
	
	<update id="modify" parameterType="com.edu.springboot.jdbc.SupportsDTO">
		UPDATE couboard
		SET name=#{name}, contents=#{contents}
		WHERE idx=#{idx} AND email=#{email}
	</update>

	<delete id="delete">
		DELETE FROM couboard WHERE idx=#{param1} AND email=#{param2}
	</delete>

	<select id="hashMapUse" resultType="com.edu.springboot.jdbc.SupportsDTO"
		parameterType="java.util.Map">
		SELECT * FROM couboard
		WHERE id=#{key_id} or name=#{key_name}
		or contents=#{key_contents}
		ORDER BY idx DESC
	</select>

	<select id="arrayListUse" resultType="com.edu.springboot.jdbc.SupportsDTO"
		parameterType="java.util.ArrayList">
		SELECT * FROM couboard
		WHERE
		<foreach collection="list" item="item" index="index" open="("
			close=")" separator="or">
			name=#{item}
		</foreach>
		ORDER BY idx DESC
	</select>
	
	<select id="tempMethodXXX" resultType="com.edu.springboot.jdbc.SupportsDTO"
		parameterType="list">
		SELECT * FROM couboard
		WHERE
		<foreach collection="list" item="item" index="index" open="("
			close=")" separator=",">
			#{item}
		</foreach>
		ORDER BY idx DESC
	</select>
 	
 </mapper>